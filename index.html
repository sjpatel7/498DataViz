<html>
<script src='https://d3js.org/d3.v5.min.js'>
<style> rect {fill: lightblue; stroke: black; }</style>
</script>
<body onload='approval()'>
<svg width=1500 height=300>
</svg>
<button onclick="approval()">
Brexit Approval
</button>

<button onclick="wrong()">
Brexit Disapproval
</button>

<button onclick="both()">
Both
</button>

<script>
async function approval() {
	var data = await d3.csv('https://raw.githubusercontent.com/sjpatel7/498DataViz/master/data2.csv');

var x = d3.scaleBand().domain([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]).range([0,500]);
var y = d3.scaleLinear().domain([40,50]).range([200,0]);

d3.select('svg').append('g')
.attr("transform","translate(50,50)")
.selectAll("rect").data(data).enter().append("rect")
.attr("x", function(d,i) {return x(i);})
.attr("y", function(d,i) {return 200;})
.attr("width", x.bandwidth)
.attr("height", function(d,i) {return 0;})
.attr("style", "fill:rgb(0,200,50);stroke-width:1;stroke:rgb(0,0,0)")
.transition().duration(2000).delay(250)
.attr("x", function(d,i) {return x(i);})
.attr("y", function(d,i) {return y(d.right);})
.attr("width", x.bandwidth)
.attr("height", function(d,i) {return 200 - y(d.right);});

d3.select("svg").append("g")
.attr("transform", "translate(50,50)")
.call(d3.axisLeft(y));

d3.select("svg").append("g")
.attr("transform", "translate(50,250)")
.call(d3.axisBottom(x));
}

async function wrong() {
	var data = await d3.csv('https://raw.githubusercontent.com/sjpatel7/498DataViz/master/data2.csv');

var x = d3.scaleBand().domain([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]).range([0,500]);
var y = d3.scaleLinear().domain([40,50]).range([200,0]);

d3.select('svg').append('g')
.attr("transform","translate(50,50)")
.selectAll("rect").data(data).enter().append("rect")
.attr("x", function(d,i) {return x(i);})
.attr("y", function(d,i) {return 200;})
.attr("width", x.bandwidth)
.attr("height", function(d,i) {return 0;})
.attr("style", "fill:rgb(200,0,100);stroke-width:1;stroke:rgb(0,0,0);opacity:0.8")
.transition().duration(2000).delay(250)
.attr("x", function(d,i) {return x(i);})
.attr("y", function(d,i) {return y(d.wrong);})
.attr("width", x.bandwidth)
.attr("height", function(d,i) {return 200 - y(d.wrong);});

d3.select("svg").append("g")
.attr("transform", "translate(50,50)")
.call(d3.axisLeft(y));

d3.select("svg").append("g")
.attr("transform", "translate(50,250)")
.call(d3.axisBottom(x));
}

</script>
</body>
</html>
